version: 1.1.{build}
image:
  - Visual Studio 2019
  - Ubuntu1604
skip_commits:
  files:
    - '*.md'
    - '*.txt'
    - '.git*'
configuration: Release
init:
- git config --global core.autocrlf true
before_build:
- dotnet --info
build_script:
- ps: dotnet build --configuration $CONFIGURATION
- ps: if (!(Test-Path -PathType Container dist)) { New-Item -ItemType Directory temp }
- ps: if ($isWindows) { dotnet pack --configuration $CONFIGURATION }
test_script:
- ps: dotnet test
artifacts:
- path: 'dist\*.nupkg'
  name: NuGet
- path: 'dist\*.snupkg'
  name: NuGet (symbols)
